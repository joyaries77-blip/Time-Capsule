# äº‘Macç«¯æ‰“åŒ…å’Œæµ‹è¯•æŒ‡å— - Time Capsule

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨äº‘Macä¸Šæ‰“åŒ…ã€æµ‹è¯•å’Œå‘å¸ƒ Time Capsule iOS åº”ç”¨ã€‚

## ğŸ“‹ å‰ç½®è¦æ±‚

1. **äº‘Macç¯å¢ƒ**ï¼ˆå·²å®‰è£… Xcode 14+ï¼‰
2. **Apple Developer è´¦å·**ï¼ˆç”¨äºç­¾åå’Œåˆ†å‘ï¼‰
3. **é¡¹ç›®å·²å‡†å¤‡å°±ç»ª**ï¼ˆå·²å®Œæˆæœ¬åœ°æ„å»ºå’Œ iOS å¹³å°æ·»åŠ ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: ä¸Šä¼ é¡¹ç›®åˆ°äº‘Mac

å°†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°äº‘Macï¼Œç¡®ä¿åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š
- `ios/` æ–‡ä»¶å¤¹ï¼ˆiOS é¡¹ç›®ï¼‰
- `dist/` æ–‡ä»¶å¤¹ï¼ˆæ„å»ºåçš„ Web èµ„æºï¼‰
- `package.json` å’Œ `node_modules/`ï¼ˆå¦‚æœéœ€è¦é‡æ–°æ„å»ºï¼‰
- `capacitor.config.ts`ï¼ˆé…ç½®æ–‡ä»¶ï¼‰

### æ­¥éª¤ 2: åœ¨äº‘Macä¸Šæ‰“å¼€é¡¹ç›®

#### æ–¹æ³• 1: ä½¿ç”¨å‘½ä»¤è¡Œï¼ˆæ¨èï¼‰

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd "/path/to/Time Capsule"

# åœ¨ Xcode ä¸­æ‰“å¼€é¡¹ç›®
npx cap open ios
```

#### æ–¹æ³• 2: æ‰‹åŠ¨æ‰“å¼€

```bash
# æ‰“å¼€ Xcode å·¥ä½œç©ºé—´
open ios/App/App.xcworkspace
```

**æ³¨æ„**ï¼šå¿…é¡»æ‰“å¼€ `.xcworkspace` æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ `.xcodeproj` æ–‡ä»¶ï¼

### æ­¥éª¤ 3: é…ç½® Xcode é¡¹ç›®

#### 3.1 é€‰æ‹©é¡¹ç›®ç›®æ ‡

1. åœ¨ Xcode å·¦ä¾§å¯¼èˆªæ ï¼Œç‚¹å‡»æœ€é¡¶éƒ¨çš„é¡¹ç›®åç§°ï¼ˆ**App**ï¼‰
2. åœ¨ä¸­é—´é¢æ¿é€‰æ‹© **TARGETS** > **App**
3. ç‚¹å‡» **General** æ ‡ç­¾é¡µ

#### 3.2 é…ç½®åº”ç”¨ä¿¡æ¯

åœ¨ **General** æ ‡ç­¾é¡µä¸­è®¾ç½®ï¼š

- **Display Name**: `Time Capsule`
- **Bundle Identifier**: `com.timecapsule.app`ï¼ˆæˆ–æ‚¨è‡ªå·±çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰
- **Version**: `1.0.0`ï¼ˆæˆ–å½“å‰ç‰ˆæœ¬å·ï¼‰
- **Build**: `1`ï¼ˆæ¯æ¬¡å‘å¸ƒæ—¶é€’å¢ï¼‰

#### 3.3 é…ç½®ç­¾åå’Œè¯ä¹¦

1. åˆ‡æ¢åˆ° **Signing & Capabilities** æ ‡ç­¾é¡µ
2. å‹¾é€‰ **Automatically manage signing**
3. åœ¨ **Team** ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©æ‚¨çš„ Apple Developer å›¢é˜Ÿ
4. Xcode ä¼šè‡ªåŠ¨ç”Ÿæˆ Provisioning Profile

**å¦‚æœé‡åˆ°ç­¾åé”™è¯¯**ï¼š
- ç¡®ä¿å·²ç™»å½• Apple Developer è´¦å·ï¼ˆXcode > Preferences > Accountsï¼‰
- æ£€æŸ¥ Bundle Identifier æ˜¯å¦å”¯ä¸€
- å°è¯•æ¸…ç†é¡¹ç›®ï¼š**Product** > **Clean Build Folder** (Shift + Cmd + K)

#### 3.4 é…ç½®åº”ç”¨å›¾æ ‡ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦æ›´æ–°åº”ç”¨å›¾æ ‡ï¼š

1. å‡†å¤‡ 1024x1024 çš„å›¾æ ‡æ–‡ä»¶
2. ä½¿ç”¨åœ¨çº¿å·¥å…·ç”Ÿæˆæ‰€æœ‰å°ºå¯¸ï¼šhttps://www.appicon.co/
3. åœ¨ Xcode ä¸­ï¼š
   - é€‰æ‹© **Assets.xcassets** > **AppIcon**
   - å°†ç”Ÿæˆçš„å›¾æ ‡æ‹–æ‹½åˆ°å¯¹åº”çš„å°ºå¯¸æ§½ä½

### æ­¥éª¤ 4: é€‰æ‹©ç›®æ ‡è®¾å¤‡

åœ¨ Xcode é¡¶éƒ¨å·¥å…·æ ï¼š

- **æ¨¡æ‹Ÿå™¨**ï¼šé€‰æ‹© iPhone 15 Proã€iPhone 14 ç­‰æ¨¡æ‹Ÿå™¨
- **çœŸæœº**ï¼šè¿æ¥ iPhone åé€‰æ‹©æ‚¨çš„è®¾å¤‡

### æ­¥éª¤ 5: æ„å»ºå’Œè¿è¡Œæµ‹è¯•

#### 5.1 åœ¨æ¨¡æ‹Ÿå™¨ä¸Šæµ‹è¯•

1. é€‰æ‹©æ¨¡æ‹Ÿå™¨ï¼ˆå¦‚ iPhone 15 Proï¼‰
2. ç‚¹å‡» **Run** æŒ‰é’®ï¼ˆâ–¶ï¸ï¼‰æˆ–æŒ‰ `Cmd + R`
3. ç­‰å¾…æ„å»ºå®Œæˆï¼Œåº”ç”¨å°†åœ¨æ¨¡æ‹Ÿå™¨ä¸­å¯åŠ¨

#### 5.2 åœ¨çœŸæœºä¸Šæµ‹è¯•

1. ä½¿ç”¨ USB è¿æ¥ iPhone åˆ°äº‘Mac
2. åœ¨ iPhone ä¸Šä¿¡ä»»æ­¤ç”µè„‘ï¼ˆå¦‚æœæç¤ºï¼‰
3. åœ¨ Xcode ä¸­é€‰æ‹©æ‚¨çš„è®¾å¤‡
4. ç‚¹å‡» **Run** æŒ‰é’®
5. é¦–æ¬¡å®‰è£…æ—¶ï¼Œåœ¨ iPhone ä¸Šï¼š
   - è¿›å…¥ **è®¾ç½®** > **é€šç”¨** > **VPNä¸è®¾å¤‡ç®¡ç†**
   - æ‰¾åˆ°æ‚¨çš„å¼€å‘è€…è´¦å·
   - ç‚¹å‡» **ä¿¡ä»»**

### æ­¥éª¤ 6: æ‰“åŒ…ä¸º Archiveï¼ˆå½’æ¡£ï¼‰

#### 6.1 å‡†å¤‡å½’æ¡£

1. ç¡®ä¿é€‰æ‹© **Any iOS Device (arm64)** ä½œä¸ºç›®æ ‡ï¼ˆä¸æ˜¯æ¨¡æ‹Ÿå™¨ï¼‰
2. åœ¨èœå•æ é€‰æ‹© **Product** > **Archive**
3. ç­‰å¾…å½’æ¡£å®Œæˆï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰
4. Organizer çª—å£å°†è‡ªåŠ¨æ‰“å¼€

#### 6.2 éªŒè¯ Archive

åœ¨ Organizer çª—å£ä¸­ï¼š
- æ£€æŸ¥åº”ç”¨ä¿¡æ¯æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ç‰ˆæœ¬å·å’Œæ„å»ºå·
- æŸ¥çœ‹æ˜¯å¦æœ‰è­¦å‘Šæˆ–é”™è¯¯

### æ­¥éª¤ 7: åˆ†å‘åº”ç”¨

#### 7.1 é€‰æ‹©åˆ†å‘æ–¹å¼

åœ¨ Organizer çª—å£ä¸­ï¼Œé€‰æ‹©åˆšåˆ›å»ºçš„ Archiveï¼Œç‚¹å‡» **Distribute App**ï¼Œç„¶åé€‰æ‹©ï¼š

**é€‰é¡¹ 1: App Store Connect**ï¼ˆæ¨èç”¨äº TestFlight å’Œ App Storeï¼‰
- ä¸Šä¼ åˆ° App Store Connect
- å¯ç”¨äº TestFlight æµ‹è¯•
- å¯ç”¨äº App Store å‘å¸ƒ

**é€‰é¡¹ 2: Ad Hoc**
- ç›´æ¥å®‰è£…åˆ°æŒ‡å®šè®¾å¤‡ï¼ˆæœ€å¤š 100 å°ï¼‰
- éœ€è¦æ³¨å†Œè®¾å¤‡ UDID
- é€‚åˆå†…éƒ¨æµ‹è¯•

**é€‰é¡¹ 3: Development**
- ä»…ç”¨äºå¼€å‘æµ‹è¯•
- éœ€è¦è®¾å¤‡å·²æ³¨å†Œ

**é€‰é¡¹ 4: Enterprise**
- ä»…é€‚ç”¨äºä¼ä¸šè´¦å·
- æ— è®¾å¤‡æ•°é‡é™åˆ¶

#### 7.2 ä¸Šä¼ åˆ° App Store Connectï¼ˆTestFlight æµ‹è¯•ï¼‰

1. é€‰æ‹© **App Store Connect**
2. é€‰æ‹© **Upload**ï¼ˆä¸Šä¼ ï¼‰
3. æŒ‰ç…§å‘å¯¼å®Œæˆï¼š
   - é€‰æ‹©åˆ†å‘é€‰é¡¹
   - éªŒè¯åº”ç”¨
   - ä¸Šä¼ åˆ° App Store Connect
4. ç­‰å¾…ä¸Šä¼ å®Œæˆï¼ˆå¯èƒ½éœ€è¦ 10-30 åˆ†é’Ÿï¼‰

#### 7.3 é…ç½® TestFlight

1. ç™»å½• [App Store Connect](https://appstoreconnect.apple.com/)
2. è¿›å…¥ **æˆ‘çš„ App** > **Time Capsule**
3. è¿›å…¥ **TestFlight** æ ‡ç­¾é¡µ
4. ç­‰å¾…å¤„ç†å®Œæˆï¼ˆé€šå¸¸ 10-30 åˆ†é’Ÿï¼‰
5. æ·»åŠ æµ‹è¯•ç”¨æˆ·ï¼š
   - ç‚¹å‡» **å†…éƒ¨æµ‹è¯•** æˆ– **å¤–éƒ¨æµ‹è¯•**
   - æ·»åŠ æµ‹è¯•ç”¨æˆ·çš„ Apple ID
   - å‘é€æµ‹è¯•é‚€è¯·

#### 7.4 æµ‹è¯•ç”¨æˆ·å®‰è£…

æµ‹è¯•ç”¨æˆ·éœ€è¦ï¼š
1. åœ¨ iPhone ä¸Šå®‰è£… **TestFlight** åº”ç”¨ï¼ˆApp Store å…è´¹ä¸‹è½½ï¼‰
2. æ¥å—æµ‹è¯•é‚€è¯·ï¼ˆé€šè¿‡é‚®ä»¶æˆ–é“¾æ¥ï¼‰
3. åœ¨ TestFlight ä¸­å®‰è£…åº”ç”¨
4. å¼€å§‹æµ‹è¯•å¹¶æä¾›åé¦ˆ

### æ­¥éª¤ 8: æ›´æ–°åº”ç”¨

å½“æ‚¨ä¿®æ”¹ä»£ç åï¼Œéœ€è¦é‡æ–°æ‰“åŒ…ï¼š

```bash
# åœ¨æœ¬åœ°æˆ–äº‘Macä¸Š
# 1. é‡æ–°æ„å»º Web åº”ç”¨
npm run build

# 2. åŒæ­¥åˆ° iOS é¡¹ç›®
npx cap sync ios

# 3. åœ¨ Xcode ä¸­é‡æ–°å½’æ¡£å’Œä¸Šä¼ 
```

**é‡è¦**ï¼šæ¯æ¬¡æ›´æ–°æ—¶è®°å¾—é€’å¢ **Build** å·ï¼

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: ç­¾åé”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š`No signing certificate found` æˆ– `Provisioning profile not found`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ Xcode > Preferences > Accounts ä¸­æ˜¯å¦å·²ç™»å½• Apple Developer è´¦å·
2. ç¡®ä¿ Bundle Identifier å”¯ä¸€
3. å°è¯•æ¸…ç†é¡¹ç›®ï¼š**Product** > **Clean Build Folder**
4. é‡æ–°ç”Ÿæˆ Provisioning Profileï¼šå–æ¶ˆå‹¾é€‰å¹¶é‡æ–°å‹¾é€‰ **Automatically manage signing**

### é—®é¢˜ 2: æ„å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼šå„ç§ç¼–è¯‘é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…ç†å¹¶é‡æ–°åŒæ­¥
npm run build
npx cap sync ios

# åœ¨ Xcode ä¸­æ¸…ç†
Product > Clean Build Folder (Shift + Cmd + K)
```

### é—®é¢˜ 3: åº”ç”¨æ— æ³•å¯åŠ¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ Xcode æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
2. ç¡®ä¿ `dist` æ–‡ä»¶å¤¹å†…å®¹å·²æ­£ç¡®åŒæ­¥
3. è¿è¡Œ `npx cap sync ios` é‡æ–°åŒæ­¥
4. æ£€æŸ¥ `capacitor.config.ts` é…ç½®æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 4: TestFlight å¤„ç†å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ App Store Connect ä¸­çš„æ„å»ºçŠ¶æ€
2. æŸ¥çœ‹æ˜¯å¦æœ‰åˆè§„æ€§é—®é¢˜
3. ç¡®ä¿åº”ç”¨ä¿¡æ¯å®Œæ•´ï¼ˆéšç§æ”¿ç­–ã€æè¿°ç­‰ï¼‰
4. æ£€æŸ¥æ˜¯å¦æœ‰è¢«æ‹’ç»çš„åŸå› 

### é—®é¢˜ 5: å›¾æ ‡ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿æ‰€æœ‰å›¾æ ‡å°ºå¯¸éƒ½å·²æ·»åŠ åˆ° AppIcon
2. ä½¿ç”¨ `.png` æ ¼å¼ï¼Œä¸è¦ä½¿ç”¨ `.jpg`
3. é‡æ–°æ„å»ºé¡¹ç›®
4. æ¸…ç†æ„å»ºç¼“å­˜

## ğŸ“± æµ‹è¯•æ¸…å•

åœ¨å‘å¸ƒåˆ° TestFlight å‰ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] åº”ç”¨å¯ä»¥æ­£å¸¸å¯åŠ¨
- [ ] æ‰€æœ‰ä¸»è¦åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] ç•Œé¢åœ¨ä¸åŒè®¾å¤‡å°ºå¯¸ä¸Šæ˜¾ç¤ºæ­£å¸¸
- [ ] æ²¡æœ‰å´©æºƒæˆ–ä¸¥é‡é”™è¯¯
- [ ] åº”ç”¨å›¾æ ‡å’Œå¯åŠ¨ç”»é¢æ­£ç¡®æ˜¾ç¤º
- [ ] ç‰ˆæœ¬å·å’Œæ„å»ºå·æ­£ç¡®
- [ ] éšç§æ”¿ç­–å’Œç”¨æˆ·åè®®å·²å‡†å¤‡ï¼ˆå¦‚éœ€è¦ï¼‰

## ğŸ¯ å‘å¸ƒæµç¨‹æ€»ç»“

```
1. æœ¬åœ°æ„å»º â†’ npm run build
2. åŒæ­¥ iOS â†’ npx cap sync ios
3. ä¸Šä¼ åˆ°äº‘Macï¼ˆå¦‚éœ€è¦ï¼‰
4. åœ¨ Xcode ä¸­æ‰“å¼€ â†’ npx cap open ios
5. é…ç½®ç­¾åå’Œè¯ä¹¦
6. é€‰æ‹©è®¾å¤‡ â†’ Any iOS Device
7. å½’æ¡£ â†’ Product > Archive
8. åˆ†å‘ â†’ Distribute App > App Store Connect
9. ä¸Šä¼ åˆ° App Store Connect
10. åœ¨ App Store Connect ä¸­é…ç½® TestFlight
11. æ·»åŠ æµ‹è¯•ç”¨æˆ·
12. æµ‹è¯•ç”¨æˆ·é€šè¿‡ TestFlight å®‰è£…å’Œæµ‹è¯•
```

## ğŸ“š ç›¸å…³èµ„æº

- [Capacitor å®˜æ–¹æ–‡æ¡£](https://capacitorjs.com/docs)
- [Xcode æ–‡æ¡£](https://developer.apple.com/documentation/xcode)
- [App Store Connect å¸®åŠ©](https://help.apple.com/app-store-connect/)
- [TestFlight æ–‡æ¡£](https://developer.apple.com/testflight/)

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡æ„å»ºå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´**ï¼ˆä¸‹è½½ä¾èµ–å’Œç´¢å¼•ï¼‰
2. **å»ºè®®ä½¿ç”¨ Xcode 14+** ä»¥è·å¾—æœ€ä½³å…¼å®¹æ€§
3. **iOS éƒ¨ç½²ç›®æ ‡**ï¼šå»ºè®®è®¾ç½®ä¸º iOS 13.0 æˆ–æ›´é«˜
4. **å†…å­˜è¦æ±‚**ï¼šXcode éœ€è¦è‡³å°‘ 8GB RAM
5. **ç½‘ç»œè¦æ±‚**ï¼šä¸Šä¼  Archive éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥

## âœ… å®Œæˆæ£€æŸ¥

æ‰“åŒ…å®Œæˆåï¼Œç¡®è®¤ï¼š
- [x] Archive å·²æˆåŠŸåˆ›å»º
- [x] å·²ä¸Šä¼ åˆ° App Store Connect
- [x] TestFlight æ„å»ºå·²å¤„ç†å®Œæˆ
- [x] æµ‹è¯•ç”¨æˆ·å·²æ·»åŠ 
- [x] æµ‹è¯•é‚€è¯·å·²å‘é€

ç¥æ‚¨æ‰“åŒ…é¡ºåˆ©ï¼ğŸ‰

